<import src="/pages/show/list/tpl/_show.wxml"></import>
<import src="/pages/show/tpl/_banner.wxml"></import>
<view class="header">
    <navigator class="top-search" hoverClass="none" url="/pages/show/search/index">
        <icon color="#c9c9c9" size="13" type="search"></icon>
        <text class="">找艺人、演出、场馆</text>
    </navigator>
</view>
<view class="menu" wx:if="{{categories}}">
    <scroll-view scrollWithAnimation scrollX class="categories" direction="horizontal" scrollIntoView="view-{{category.categoryId}}">
        <view bindtap="onTapCategory" class="category scroll-view-item {{category.categoryId===item.categoryId?'active':''}}" data-category="{{item}}" id="view-{{item.categoryId}}" wx:for="{{categories}}" wx:key="{{item.categoryId}}">{{item.categoryName}}</view>
    </scroll-view>
    <view bindtap="onTapSort" class="sort"></view>
    <view catchtap="onTapSortItem" class="sort-panel" wx:if="{{showSortPanel}}">
        <view class="sort-item smart" data-sort="0">{{sortMap[0]}}</view>
        <view class="sort-item sale" data-sort="4">{{sortMap[4]}}</view>
        <view class="sort-item distance" data-sort="3">{{sortMap[3]}}</view>
    </view>
</view>
<template is="banner" data="{{swiperOptions:swiperOptions,banners:banners}}" wx:if="banners.length"></template>
<view class="list" wx:if="{{!emptyList}}">
    <scroll-view>
        <view class="performance-list-item" wx:for="{{performances}}" wx:for-item="performance" wx:key="{{ index }}">
            <template is="show" data="{{...performance,index:index}}"></template>
        </view>
        <view class="performance-empty-title" wx:if="{{!performances.length&&!!recommendPerformances.length}}">┈ 当前城市暂无相关演出 ┈</view>
        <view class="recommend-list-title" wx:if="{{!!recommendPerformances.length}}">
            <image src="https://static.meituan.net/bs/MYFE/wxapp-wallet/file/images/show/show/i-recommend.png"></image>
            <text>周边城市热门演出</text>
        </view>
        <view class="recommend-list-item" wx:for="{{recommendPerformances}}" wx:for-item="recommendPerformance" wx:key="{{recommendPerformance.performanceId}}">
            <template is="show" data="{{...recommendPerformance,index:index}}"></template>
        </view>
        <text class="list-load-text" wx:if="{{fetchIndex&&fetchMore}}">正在加载中...</text>
        <text class="list-load-text" wx:if="{{performances.length+recommendPerformances.length>=5&&!fetchMore}}">没有更多数据</text>
    </scroll-view>
</view>
<view class="empty-list" wx:else>
    <image mode="aspectFit" src="https://p0.meituan.net/moviesh/99f359004c8af8d47d92584ae3c4ce424855.png"></image>
    <view class="empty-text">当前筛选类别没有演出</view>
</view>
<include src="/footer.wxml"></include>
